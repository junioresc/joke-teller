(()=>{const e=document.getElementById("button"),t=document.getElementById("audio"),a={speech:function(e){this._validate(e),this._request(e)},_validate:function(e){if(!e)throw"The settings are undefined";if(!e.key)throw"The API key is undefined";if(!e.src)throw"The text is undefined";if(!e.hl)throw"The language is undefined";if(e.c&&"auto"!=e.c.toLowerCase()){var t=!1;switch(e.c.toLowerCase()){case"mp3":t=(new Audio).canPlayType("audio/mpeg").replace("no","");break;case"wav":t=(new Audio).canPlayType("audio/wav").replace("no","");break;case"aac":t=(new Audio).canPlayType("audio/aac").replace("no","");break;case"ogg":t=(new Audio).canPlayType("audio/ogg").replace("no","");break;case"caf":t=(new Audio).canPlayType("audio/x-caf").replace("no","")}if(!t)throw"The browser does not support the audio codec "+e.c}},_request:function(e){var a=this._buildRequest(e),c=this._getXHR();c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){if(0==c.responseText.indexOf("ERROR"))throw c.responseText;t.src=c.responseText,t.play()}},c.open("POST","https://api.voicerss.org/",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),c.send(a)},_buildRequest:function(e){var t=e.c&&"auto"!=e.c.toLowerCase()?e.c:this._detectCodec();return"key="+(e.key||"")+"&src="+(e.src||"")+"&hl="+(e.hl||"")+"&r="+(e.r||"")+"&c="+(t||"")+"&f="+(e.f||"")+"&ssml="+(e.ssml||"")+"&b64=true"},_detectCodec:function(){var e=new Audio;return e.canPlayType("audio/mpeg").replace("no","")?"mp3":e.canPlayType("audio/wav").replace("no","")?"wav":e.canPlayType("audio/aac").replace("no","")?"aac":e.canPlayType("audio/ogg").replace("no","")?"ogg":e.canPlayType("audio/x-caf").replace("no","")?"caf":""},_getXHR:function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw"The browser does not support HTTP request"}},c=()=>{e.disabled=!e.disabled};e.addEventListener("click",(async()=>{let e="";try{const t=await fetch("https://v2.jokeapi.dev/joke/Programming,Pun,Spooky"),n=await t.json();e=n.setup?`${n.setup} ... ${n.delivery}`:n.joke,(e=>{a.speech({key:"ac83a8930cb948f7a8888586a52014fd",src:e,hl:"en-us",v:"John",r:0,c:"mp3",f:"44khz_16bit_stereo",ssml:!1})})(e),c()}catch(e){console.log("no jokes :(",e)}})),t.addEventListener("ended",c)})();